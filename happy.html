<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<title>Happy Birthday dear ‚Äî Hearts Enhanced</title>
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">

<style>
  :root{
    --heading: #ff8a9e;
  }

  html,body{
    margin:0;
    padding:0;
    width:100%;
    height:100%;
    overflow:hidden;
    background:#000;
    font-family:system-ui,-apple-system,"Segoe UI",Roboto;
    position:relative;
  }

  /* ‚≠ê Background image (NOW 50% opacity) */
  .bg-image{
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    background-image:url("https://raw.githubusercontent.com/Joogly-in/Theme/main/DSC07256.JPG");
    background-size:cover;
    background-position:center;
    opacity:0.65;   /* ‚Üê UPDATED */
    z-index:0;
    pointer-events:none;
  }

  /* ‚≠ê Top text */
.bg-text{
    position:fixed;
    top:4%;
    left:50%;
    transform:translateX(-50%);
    z-index:5;

    font-family: "Great Vibes", cursive;
    font-size:clamp(30px,12vw,100px);
    font-weight:400;
    line-height:1;

    color:#ffb7c9;
    text-align:center;
    pointer-events:none;

    text-shadow:
       0 0 12px rgba(255,160,180,0.7),
       0 0 28px rgba(255,120,150,0.55),
       0 0 40px rgba(255,90,130,0.35);
}


  /* ‚ú® Sparkles Canvas (behind hearts) */
  #sparkles{
    position:fixed;
    top:0;
    left:0;
    width:100vw;
    height:100vh;
    z-index:7;
    pointer-events:none;
  }

  /* üíñ Hearts Canvas (TOP layer) */
  #canvas{
    position:fixed;
    top:0;
    left:0;
    width:100vw;
    height:100vh;
    z-index:10;
    display:block;
    touch-action:none;
  }
</style>
</head>

<body>

<div class="bg-image"></div>
<div class="bg-text">Happy Birthday<br>My Love</div>

<!-- ‚ú® Sparkles -->
<canvas id="sparkles"></canvas>

<!-- üíñ Hearts -->
<canvas id="canvas"></canvas>

<script>
/* ------------------------------------------------------
   ‚ú® SPARKLES ENGINE
------------------------------------------------------ */
(() => {
  const c = document.getElementById("sparkles");
  const x = c.getContext("2d");

  let W = innerWidth, H = innerHeight;

  function resize(){
    W = innerWidth; H = innerHeight;
    c.width = W * devicePixelRatio;
    c.height = H * devicePixelRatio;
    c.style.width = W+"px";
    c.style.height = H+"px";
    x.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);
  }
  resize(); addEventListener("resize",resize);

  const sparkles = [];

  function spawn(){
    sparkles.push({
      x: Math.random()*W,
      y: Math.random()*H,
      size: Math.random()*3+1,
      alpha: Math.random()*0.8+0.2,
      speed: Math.random()*0.6+0.2
    });
  }
  for(let i=0;i<80;i++) spawn();

  function loop(){
    x.clearRect(0,0,W,H);
    for(const s of sparkles){
      x.globalAlpha = s.alpha;
      x.fillStyle = "#ffffff";
      x.beginPath();
      x.arc(s.x,s.y,s.size,0,Math.PI*2);
      x.fill();
      s.y -= s.speed;
      if(s.y < -10){
        s.y = H+10;
        s.x = Math.random()*W;
      }
    }
    requestAnimationFrame(loop);
  }
  loop();
})();
</script>


<script>
/* ------------------------------------------------------
   üíñ HEART ENGINE WITH GLOW
------------------------------------------------------ */
(() => {
  const canvas = document.getElementById("canvas");
  const ctx = canvas.getContext("2d");

  let W = innerWidth;
  let H = innerHeight;
  let DPR = Math.max(1, devicePixelRatio || 1);

  function resize(){
    W = innerWidth;
    H = innerHeight;
    canvas.width = W * DPR;
    canvas.height = H * DPR;
    canvas.style.width = W + "px";
    canvas.style.height = H + "px";
    ctx.setTransform(DPR,0,0,DPR,0,0);
  }
  addEventListener("resize", resize);
  resize();

  const COLORS = ["#FF3B8E","#FF8A5B","#FFCD3C",
                  "#4CE6B0","#4DA6FF","#7D4CFF",
                  "#FF6EC7","#FFB1B1","#6EE7B7","#FF9F1C"];

  function rand(a,b){ return a + Math.random()*(b-a); }

  function drawHeart(ctx,size){
    const s = size/2;
    ctx.beginPath();
    ctx.moveTo(0,-s*0.15);
    ctx.bezierCurveTo(s,-s,s*2,-s*0.05,0,s*1.25);
    ctx.bezierCurveTo(-s*2,-s*0.05,-s,-s,0,-s*0.15);
    ctx.closePath();
    ctx.fill();
  }

  class Heart {
    constructor(){
      this.size = Math.round(rand(22,38));
      this.r = this.size*0.45;
      this.x = rand(50, W-50);
      this.y = rand(120, H-50);
      this.color = COLORS[Math.floor(Math.random()*COLORS.length)];
      this.vx = 0;
      this.vy = 0;
      this.mass = Math.max(0.6, this.r*0.07);
      this.angle = rand(-0.3,0.3);
      this.angularVel = 0;

      this._stopStart = null;
      this._stopDuration = 0;
      this._initialVx = 0;
      this._initialVy = 0;
    }

    step(dt){
      this.x += this.vx*dt;
      this.y += this.vy*dt;
      this.angle += this.angularVel*dt;

      if(this.x - this.r < 0){ this.x=this.r; this.vx=Math.abs(this.vx); }
      if(this.x + this.r > W){ this.x=W-this.r; this.vx=-Math.abs(this.vx); }
      if(this.y - this.r < 0){ this.y=this.r; this.vy=Math.abs(this.vy); }
      if(this.y + this.r > H){ this.y=H-this.r; this.vy=-Math.abs(this.vy); }
    }

    draw(ctx){
      ctx.save();
      ctx.translate(this.x,this.y);
      ctx.rotate(this.angle);

      /* üíñ Glow */
      ctx.shadowBlur = 10;
      ctx.shadowColor = this.color;

      ctx.fillStyle = this.color;
      drawHeart(ctx,this.size);

      ctx.restore();
    }

    markStop(ms=4000){
      this._stopStart = performance.now();
      this._stopDuration = ms;
      this._initialVx = this.vx;
      this._initialVy = this.vy;
    }

    applyStop(){
      if(!this._stopStart) return;
      const t = (performance.now()-this._stopStart)/this._stopDuration;
      if(t>=1){
        this.vx=0; this.vy=0;
        this.angularVel*=0.1;
        this._stopStart=null;
        return;
      }
      const m = (1-t)*(1-t);
      this.vx = this._initialVx * m;
      this.vy = this._initialVy * m;
      this.angularVel *= m;
    }
  }

  let hearts=[];
  for(let i=0; i<250; i++) hearts.push(new Heart());

  function resolveCollision(a,b){
    let dx=b.x-a.x, dy=b.y-a.y;
    let dist=Math.hypot(dx,dy) || 0.0001;
    let overlap=a.r+b.r-dist;

    if(overlap>0){
      let nx=dx/dist, ny=dy/dist;
      let total=a.mass+b.mass;
      a.x -= nx*(overlap*(b.mass/total));
      a.y -= ny*(overlap*(b.mass/total));
      b.x += nx*(overlap*(a.mass/total));
      b.y += ny*(overlap*(a.mass/total));
    }
  }

  let last=performance.now();
  function loop(now){
    let dt = Math.min(0.035,(now-last)/1000);
    last=now;

    ctx.clearRect(0,0,W,H);

    for(const h of hearts) h.step(dt);

    for(let i=0;i<hearts.length;i++)
      for(let j=i+1;j<hearts.length;j++)
        resolveCollision(hearts[i],hearts[j]);

    for(const h of hearts) h.applyStop();

    for(const h of hearts) h.draw(ctx);

    requestAnimationFrame(loop);
  }
  requestAnimationFrame(loop);

  function repelAt(x,y,base=2600,radius=260){
    for(const h of hearts){
      const dx=h.x-x, dy=h.y-y;
      const d=Math.hypot(dx,dy)||0.0001;
      if(d<radius+h.r){
        const nx=dx/d, ny=dy/d;
        const factor=1-d/(radius+h.r);
        const force=factor*base*2;
        h.vx+=nx*(force/h.mass)*0.0028;
        h.vy+=ny*(force/h.mass)*0.0028;
        h.angularVel+=(Math.random()-0.5)*1.1;
        h.markStop(4000);
      }
    }
  }

  canvas.addEventListener("click",e=>{
    const r=canvas.getBoundingClientRect();
    repelAt(e.clientX-r.left, e.clientY-r.top);
  });

  canvas.addEventListener("touchstart",ev=>{
    ev.preventDefault();
    for(const t of ev.changedTouches){
      const r=canvas.getBoundingClientRect();
      repelAt(t.clientX-r.left, t.clientY-r.top,2800,280);
    }
  },{passive:false});

  canvas.addEventListener("touchmove",ev=>{
    ev.preventDefault();
    for(const t of ev.changedTouches){
      const r=canvas.getBoundingClientRect();
      repelAt(t.clientX-r.left, t.clientY-r.top,1800,220);
    }
  },{passive:false});

})();
</script>

</body>
</html>
